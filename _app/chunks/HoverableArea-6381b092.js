import{S as z,i as F,s as H,D as K,e as I,j as P,c as y,a as E,d as C,l as W,b as u,L as N,M as U,f as O,H as v,N as S,E as Z,F as x,G as $,p as ee,n as te,O as T,q as D,u as se,C as G,P as R,I as L,Q as V}from"./vendor-0e8cf8c4.js";function ae(t){let e,a,_,s,c,p,w,d,j,g,l,f,o;const b=t[10].default,h=K(b,t,t[9],null);return{c(){e=I("div"),a=I("map"),h&&h.c(),_=P(),s=I("img"),w=P(),d=I("canvas"),j=P(),g=I("span"),this.h()},l(r){e=y(r,"DIV",{class:!0});var i=E(e);a=y(i,"MAP",{name:!0});var A=E(a);h&&h.l(A),A.forEach(C),_=W(i),s=y(i,"IMG",{src:!0,alt:!0,usemap:!0,class:!0}),w=W(i),d=y(i,"CANVAS",{style:!0,class:!0}),E(d).forEach(C),j=W(i),g=y(i,"SPAN",{class:!0}),E(g).forEach(C),i.forEach(C),this.h()},h(){u(a,"name",t[0]),N(s.src,c=t[1])||u(s,"src",c),u(s,"alt",t[2]),u(s,"usemap",p="#"+t[0]),u(s,"class","svelte-1bj5jt9"),U(d,"pointer-events","none"),u(d,"class","svelte-1bj5jt9"),u(g,"class","svelte-1bj5jt9"),u(e,"class","container svelte-1bj5jt9")},m(r,i){O(r,e,i),v(e,a),h&&h.m(a,null),v(e,_),v(e,s),t[12](s),v(e,w),v(e,d),t[13](d),v(e,j),v(e,g),t[14](g),l=!0,f||(o=[S(window,"resize",t[6]),S(s,"load",t[11]),S(s,"resize",t[6]),S(s,"mousemove",t[7])],f=!0)},p(r,[i]){h&&h.p&&(!l||i&512)&&Z(h,b,r,r[9],l?$(b,r[9],i,null):x(r[9]),null),(!l||i&1)&&u(a,"name",r[0]),(!l||i&2&&!N(s.src,c=r[1]))&&u(s,"src",c),(!l||i&4)&&u(s,"alt",r[2]),(!l||i&1&&p!==(p="#"+r[0]))&&u(s,"usemap",p)},i(r){l||(ee(h,r),l=!0)},o(r){te(h,r),l=!1},d(r){r&&C(e),h&&h.d(r),t[12](null),t[13](null),t[14](null),f=!1,T(o)}}}function ne(t,e,a){let{$$slots:_={},$$scope:s}=e;const c=G([]);D("draw",c);const p=G(1);D("ratioStore",p);let{mapId:w}=e,{src:d}=e,{pixelWidth:j}=e,{alt:g}=e,l,f,o,b=1;const h=()=>{i(j,(f==null?void 0:f.width)||1),l&&(a(3,l.width=f.width,l),a(3,l.height=f.height,l))},r=n=>{a(5,o.textContent=(n.offsetX/b).toFixed(1)+","+(n.offsetY/b).toFixed(1),o)},i=(n,m)=>{b=n/(m||1),p.set(b),console.log(`set ratio to ${b}`)};se(()=>{i(j,f==null?void 0:f.width)});const A=()=>{h()};function Q(n){R[n?"unshift":"push"](()=>{f=n,a(4,f)})}function X(n){R[n?"unshift":"push"](()=>{l=n,a(3,l)})}function Y(n){R[n?"unshift":"push"](()=>{o=n,a(5,o)})}return t.$$set=n=>{"mapId"in n&&a(0,w=n.mapId),"src"in n&&a(1,d=n.src),"pixelWidth"in n&&a(8,j=n.pixelWidth),"alt"in n&&a(2,g=n.alt),"$$scope"in n&&a(9,s=n.$$scope)},t.$$.update=()=>{t.$$.dirty&8&&c.subscribe(n=>{if(!l)return;const m=l.getContext("2d");if(!n.length)m.clearRect(0,0,m.canvas.width,m.canvas.height);else{const M=[...n],[k,q]=M.pop();for(m.lineWidth=4,m.strokeStyle="#fff",m.moveTo(k,q),m.beginPath();M.length;){let[B,J]=M.pop();m.lineTo(B,J)}m.lineTo(k,q),m.closePath(),m.stroke()}})},[w,d,g,l,f,o,h,r,j,s,_,A,Q,X,Y]}class ie extends z{constructor(e){super();F(this,e,ne,ae,H,{mapId:0,src:1,pixelWidth:8,alt:2})}}function le(t){let e,a,_;return{c(){e=I("area"),this.h()},l(s){e=y(s,"AREA",{shape:!0,coords:!0,alt:!0,href:!0}),this.h()},h(){u(e,"shape","poly"),u(e,"coords",t[2]),u(e,"alt",t[1]),u(e,"href",t[0])},m(s,c){O(s,e,c),a||(_=[S(e,"mouseenter",t[3]),S(e,"mouseleave",t[4])],a=!0)},p(s,[c]){c&4&&u(e,"coords",s[2]),c&2&&u(e,"alt",s[1]),c&1&&u(e,"href",s[0])},i:L,o:L,d(s){s&&C(e),a=!1,T(_)}}}function oe(t,e,a){let _,s,{href:c=""}=e,{alt:p=""}=e,{coords:w=[]}=e,d=1;const j=V("ratioStore"),g=V("draw");j.subscribe(o=>a(6,d=o));const l=()=>{g.set(_)},f=()=>{g.set([])};return t.$$set=o=>{"href"in o&&a(0,c=o.href),"alt"in o&&a(1,p=o.alt),"coords"in o&&a(5,w=o.coords)},t.$$.update=()=>{t.$$.dirty&96&&a(7,_=w.map(o=>o.map(b=>b/d))),t.$$.dirty&128&&a(2,s=_.map(o=>o.join(",")).join(","))},[c,p,s,l,f,w,d,_]}class ue extends z{constructor(e){super();F(this,e,oe,le,H,{href:0,alt:1,coords:5})}}export{ue as H,ie as I};
