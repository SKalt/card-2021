import{S as z,i as F,s as H,D as K,e as y,j as P,c as I,a as E,d as C,l as W,b as u,L as N,M as U,f as O,H as j,N as S,E as Z,F as x,G as $,p as ee,n as te,O as T,q as D,C as G,P as R,I as L,Q as V}from"./vendor-0e8cf8c4.js";function se(t){let e,a,_,s,f,b,p,d,v,g,l,c,o;const w=t[10].default,h=K(w,t,t[9],null);return{c(){e=y("div"),a=y("map"),h&&h.c(),_=P(),s=y("img"),p=P(),d=y("canvas"),v=P(),g=y("span"),this.h()},l(r){e=I(r,"DIV",{class:!0});var i=E(e);a=I(i,"MAP",{name:!0});var A=E(a);h&&h.l(A),A.forEach(C),_=W(i),s=I(i,"IMG",{src:!0,alt:!0,usemap:!0,class:!0}),p=W(i),d=I(i,"CANVAS",{style:!0,class:!0}),E(d).forEach(C),v=W(i),g=I(i,"SPAN",{class:!0}),E(g).forEach(C),i.forEach(C),this.h()},h(){u(a,"name",t[0]),N(s.src,f=t[1])||u(s,"src",f),u(s,"alt",t[2]),u(s,"usemap",b="#"+t[0]),u(s,"class","svelte-1bj5jt9"),U(d,"pointer-events","none"),u(d,"class","svelte-1bj5jt9"),u(g,"class","svelte-1bj5jt9"),u(e,"class","container svelte-1bj5jt9")},m(r,i){O(r,e,i),j(e,a),h&&h.m(a,null),j(e,_),j(e,s),t[12](s),j(e,p),j(e,d),t[13](d),j(e,v),j(e,g),t[14](g),l=!0,c||(o=[S(window,"resize",t[6]),S(s,"load",t[11]),S(s,"resize",t[6]),S(s,"mousemove",t[7])],c=!0)},p(r,[i]){h&&h.p&&(!l||i&512)&&Z(h,w,r,r[9],l?$(w,r[9],i,null):x(r[9]),null),(!l||i&1)&&u(a,"name",r[0]),(!l||i&2&&!N(s.src,f=r[1]))&&u(s,"src",f),(!l||i&4)&&u(s,"alt",r[2]),(!l||i&1&&b!==(b="#"+r[0]))&&u(s,"usemap",b)},i(r){l||(ee(h,r),l=!0)},o(r){te(h,r),l=!1},d(r){r&&C(e),h&&h.d(r),t[12](null),t[13](null),t[14](null),c=!1,T(o)}}}function ae(t,e,a){let{$$slots:_={},$$scope:s}=e;const f=G([]);D("draw",f);const b=G(1);D("ratioStore",b);let{mapId:p}=e,{src:d}=e,{pixelWidth:v}=e,{alt:g}=e,l,c,o,w=1;const h=()=>{i(v,(c==null?void 0:c.width)||1),l&&(a(3,l.width=c.width,l),a(3,l.height=c.height,l))},r=n=>{a(5,o.textContent=(n.offsetX/w).toFixed(1)+","+(n.offsetY/w).toFixed(1),o)},i=(n,m)=>{w=n/(m||1),b.set(w)},A=()=>{h()};function Q(n){R[n?"unshift":"push"](()=>{c=n,a(4,c)})}function X(n){R[n?"unshift":"push"](()=>{l=n,a(3,l)})}function Y(n){R[n?"unshift":"push"](()=>{o=n,a(5,o)})}return t.$$set=n=>{"mapId"in n&&a(0,p=n.mapId),"src"in n&&a(1,d=n.src),"pixelWidth"in n&&a(8,v=n.pixelWidth),"alt"in n&&a(2,g=n.alt),"$$scope"in n&&a(9,s=n.$$scope)},t.$$.update=()=>{t.$$.dirty&272&&i(v,c==null?void 0:c.width),t.$$.dirty&8&&f.subscribe(n=>{if(!l)return;const m=l.getContext("2d");if(!n.length)m.clearRect(0,0,m.canvas.width,m.canvas.height);else{const M=[...n],[k,q]=M.pop();for(m.lineWidth=4,m.strokeStyle="#fff",m.moveTo(k,q),m.beginPath();M.length;){let[B,J]=M.pop();m.lineTo(B,J)}m.lineTo(k,q),m.closePath(),m.stroke()}})},[p,d,g,l,c,o,h,r,v,s,_,A,Q,X,Y]}class re extends z{constructor(e){super();F(this,e,ae,se,H,{mapId:0,src:1,pixelWidth:8,alt:2})}}function ne(t){let e,a,_;return{c(){e=y("area"),this.h()},l(s){e=I(s,"AREA",{shape:!0,coords:!0,alt:!0,href:!0}),this.h()},h(){u(e,"shape","poly"),u(e,"coords",t[2]),u(e,"alt",t[1]),u(e,"href",t[0])},m(s,f){O(s,e,f),a||(_=[S(e,"mouseenter",t[3]),S(e,"mouseleave",t[4])],a=!0)},p(s,[f]){f&4&&u(e,"coords",s[2]),f&2&&u(e,"alt",s[1]),f&1&&u(e,"href",s[0])},i:L,o:L,d(s){s&&C(e),a=!1,T(_)}}}function le(t,e,a){let _,s,{href:f=""}=e,{alt:b=""}=e,{coords:p=[]}=e,d=1;const v=V("ratioStore"),g=V("draw");v.subscribe(o=>a(6,d=o));const l=()=>{console.log("mouseenter",f),g.set(_)},c=()=>{console.log("mouseleave",f),g.set([])};return t.$$set=o=>{"href"in o&&a(0,f=o.href),"alt"in o&&a(1,b=o.alt),"coords"in o&&a(5,p=o.coords)},t.$$.update=()=>{t.$$.dirty&96&&a(7,_=p.map(o=>o.map(w=>w/d))),t.$$.dirty&128&&a(2,s=_.map(o=>o.join(",")).join(","))},[f,b,s,l,c,p,d,_]}class ie extends z{constructor(e){super();F(this,e,le,ne,H,{href:0,alt:1,coords:5})}}export{ie as H,re as I};
